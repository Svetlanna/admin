!function(a){"use strict";var b={option:{},init:function(c){b.option=a.extend(b.option,c),this.attachListeners()},attachListeners:function(){a(document).on("wpglobus_post_name_full",function(a,b){return b.language==WPGlobusCoreData.default_language?b.postnamefull:b.postnamefull+"-"+b.language})},ajax:function(b,c){return a.ajax({beforeSend:function(){c()},type:"POST",url:ajaxurl,data:{action:WPGlobusSlug.data.process_ajax,order:b},dataType:"json"})},editPermalink:function(c,d){var e,f,g=0,h=a("#editable-post-name-"+d),i=h.html(),j=a("#post_name_"+d),k=j.val()||"",l=a("#edit-slug-buttons-"+d),m=l.html(),n=a("#editable-post-name-full-"+d);for(n.find("img").replaceWith(function(){return this.alt}),n=n.html(),a("#view-post-btn-"+d).hide(),l.html('<a href="#" class="wpglobus-save button button-small" data-language="'+d+'">'+postL10n.ok+'</a> <a class="wpglobus-cancel" href="#">'+postL10n.cancel+"</a>"),l.children(".wpglobus-save").click(function(){var e=h.children("input").val();return e==a("#editable-post-name-full-"+d).text()?(l.children(".wpglobus-cancel").click(),!1):(b.ajax({language:d,action:"wpglobus-sample-permalink",post_id:c,new_title:a("#title_"+d).val(),new_slug:e,samplepermalinknonce:a("#samplepermalinknonce").val(),post_name_full:a("#editable-post-name-full").text(),slug_type:WPGlobusSlug.data.slug_type},function(){}).done(function(b){var c=a("#edit-slug-box-"+d);c.html(b),c.hasClass("hidden")&&c.fadeIn("fast",function(){c.removeClass("hidden")}),l.html(m),a("#view-post-btn-"+d).show()}).fail(function(a){}).always(function(a,b){}),!1)}),l.children(".wpglobus-cancel").click(function(){return a("#view-post-btn-"+d).show(),h.html(i),l.html(m),j.val(k),!1}),e=0;e<n.length;++e)"%"==n.charAt(e)&&g++;f=g>n.length/4?"":n,h.html('<input type="text" id="new-post-slug-'+d+'" value="'+f+'" />').children("input").keypress(function(a){var b=a.keyCode||0;return 13==b?(l.children(".wpglobus-save").click(),!1):27==b?(l.children(".wpglobus-cancel").click(),!1):void 0}).keyup(function(){j.val(this.value)}).focus()}};WPGlobusSlug=a.extend({},WPGlobusSlug,b),WPGlobusSlug.init()}(jQuery);